# get24

Get 24 from given 4 numbers (`1~13` like `A~K` of pokes)

## 寻求全部解的递归算法

采用**降低维度**的算法，即把**多维问题降低到二维**来解决。

比如，给定四个数字 `[1, 2, 3, 4]`，这是一个四维问题，我们首先要将其转换为二维问题。

具体的办法是，先将四个数字中的两个数字取出，然后将这两个数字转化为所能组成的全部表达式。

首先取出`[1, 2]`，考虑到加法交换率和乘法交换率的前提下，共有6种可能的不等价表达式：   
即 `1+2, 1-2, 1*2, 1/2, 2-1, 2/1`，则四维问题就可以转化为多组三维问题，    
即 `['1+2', 3, 4]，['1-2', 3, 4]，['1*2', 3, 4]， ['1/2', 3, 4]， ['2-1', 3, 4]， ['2/1', 3, 4]`。

<!-- 如果考虑负数，应该是十种可能的结果。（a+b）,  –(a+b), a-b, b-a, a*b, -a*b, a/b, -a/b, b/a, -b/a -->

然后我们穷尽每一种取出两个数的组合，使用排列组合公式即 $C(4, 2)$，所以将四维问题转化为三维问题共有 $C(4, 2) \times 6 = 36$ 种组合。

下一步是重复这一过程，将三维问题继续转化为二维问题，同理，每一个三维问题都可转化为等价的二维问题，共有 $C(3, 2) \times 6 = 18$ 种组合。

所以，四维问题可转化为 $36 \times 18 = 648$ 种二维问题，每个二维问题又有 6 种组合方式，所以，全部的表达式个数为$648 \times 6 = 3888$ 个。

## 加括号算法

在每一次二维组合成新表达式的时候，我们根据原有的两个表达式的各自的运算符号和两个表达式之间的运算符号的关系来判断是否需要添加括号。

比如，$a、b$ 两个表达式要组成新的表达式，总共会有如下几种情况：

如果是 $a + b$，则完全不需要加括号；

如果是 $a * b$ 或者 $a / b$，若 $a、b$ 自身的运算符号是加号或减号，则应加括号，如 $a = a_1 + a_2，b$ 为数字，则 $a \times b = (a_1 + a_2) \times b$；

如果是 $a - b$，若 $b$ 为加号或减号，则 $b$ 应加括号，如 $b = b_1 - b_2，a = a_1 + a_2$，则 $a - b = a_1 + a_2 - (b_1 - b_2)$，但值得注意的是，$a_1 + a_2 - (b_1 - b_2)$ 其实等价于 $a_1 + a_2 - b_1 + b_2$，这种情况在其他的组合中其实已经存在。因此，可以无需再考虑括号问题；

如果是 $a / b$，若 $b$ 的符号是乘号或除号，原本理应也要加括号，但其实这种情况与上一种情况类似，我们出于计算简便考虑，可以不再考虑括号问题。

## 去除等价表达式

对于一个表达式，$a + b - c + d$ 与如下表达式均是等价的：  
1) $a + d + b - c$
2) $b + a + d - c$
3) $b - c + a + d$

可以在任何一个表达式前再加一个加号，然后使用正则表达式对表达式进行切割成如下状态：`['+a', '+b', '-c', '+d']`。
然后对其进行排序后再组合成字符串得到：  $a + b + d - c$

我们将这样的表达式称为标准表达式，凡是通过这样的处理方法得到的标准表达式是相同的，我们均认为是等价表达式，只保留一个标准表达式即可。

乘法交换率也是同样的转换方法。

